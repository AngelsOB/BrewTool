@import "tailwindcss";

/* Force dark mode to work with .dark class */
@custom-variant dark (&:where(.dark, .dark *));


/* ========================================
   THEME SYSTEM
   Light theme = default (:root)
   Dark theme = .dark class
   ======================================== */

:root {
  /* Light theme - clean and readable */
  --bg: 249 250 251;          /* gray-50 */
  --surface: 255 255 255;     /* white */
  --card: 255 255 255;        /* white */
  --text: 0 0 0;              /* black */
  --text-muted: 75 85 99;     /* gray-600 */
  --border: 209 213 219;      /* gray-300 */
  
  /* Accent colors (shared) */
  --accent: 251 146 60;       /* orange-400 */
  --glow: 249 115 22;         /* orange-500 */

  /* Coral theme (OKLCH) */
  --coral-50: oklch(96.75% 0.017 44.86);
  --coral-100: oklch(93.36% 0.035 41.97);
  --coral-200: oklch(87.71% 0.071 47);
  --coral-300: oklch(81.06% 0.12 50.84);
  --coral-400: oklch(75.22% 0.179 58.74);
  --coral-500: oklch(64.96% 0.154 58.7);
  --coral-600: oklch(54.28% 0.129 58.65);
  --coral-700: oklch(44.82% 0.107 58.53);
  --coral-800: oklch(34.32% 0.082 58.51);
  --coral-900: oklch(24.44% 0.058 58.7);
  --coral-950: oklch(19.22% 0.046 58.17);

  /* Semantic text (light theme) */
  --fg-strong: oklch(15% 0.01 240);
  --fg-muted: oklch(45% 0.01 240);
}

.dark {
  /* Dark theme - existing design */
  --bg: 10 10 12;
  --surface: 18 19 23;
  --card: 22 23 28;
  --text: 240 241 245;
  --text-muted: 148 163 184;  /* slate-400 */
  --border: 55 65 81;         /* gray-700 */
  
  --accent: 251 146 60;
  --glow: 234 88 12;          /* orange-600 */

  /* repeat coral theme for dark */
  --coral-50: oklch(96.75% 0.017 44.86);
  --coral-100: oklch(93.36% 0.035 41.97);
  --coral-200: oklch(87.71% 0.071 47);
  --coral-300: oklch(81.06% 0.12 50.84);
  --coral-400: oklch(75.22% 0.179 58.74);
  --coral-500: oklch(64.96% 0.154 58.7);
  --coral-600: oklch(54.28% 0.129 58.65);
  --coral-700: oklch(44.82% 0.107 58.53);
  --coral-800: oklch(34.32% 0.082 58.51);
  --coral-900: oklch(24.44% 0.058 58.7);
  --coral-950: oklch(19.22% 0.046 58.17);

  --fg-strong: oklch(97% 0.006 240);
  --fg-muted: oklch(84% 0.008 240);
}


@layer utilities {
  .bg-dashboard {
    /* Theme-aware background */
    background: rgb(var(--bg));
  }

  .dark .bg-dashboard {
    /* Dark mode: subtle gradient with glows */
    background: radial-gradient(
        1000px 360px at 15% -10%,
        rgba(255 235 210 / 0.35),
        transparent 55%
      ),
      radial-gradient(
        900px 300px at 85% -10%,
        rgba(var(--accent) / 0.22),
        transparent 50%
      ),
      radial-gradient(
        1400px 600px at 50% 120%,
        rgba(255 238 220 / 0.28),
        transparent 50%
      ),
      linear-gradient(
        180deg,
        rgb(20 22 28) 0%,
        rgb(16 18 24) 35%,
        rgb(var(--bg)) 100%
      );
    background-attachment: fixed, fixed, fixed, fixed;
  }

  .card-glass {
    @apply relative rounded-2xl bg-[rgb(var(--card))] backdrop-blur-md border border-[rgb(var(--border))];
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 4px 12px rgba(0, 0, 0, 0.08);
    transition: box-shadow 150ms ease;
  }
  .dark .card-glass {
    @apply bg-[rgb(var(--card))]/65 border-white/10;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.35), 0 10px 30px rgba(0, 0, 0, 0.45);
  }
  .card-inner-ring::after {
    content: "";
    @apply pointer-events-none absolute inset-0 rounded-2xl ring-1 ring-inset ring-[rgb(var(--border))];
  }
  .dark .card-inner-ring::after {
    @apply ring-white/10;
  }

  /* Theme-aware shadow-soft override */
  .shadow-soft {
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08), 0 4px 12px rgba(0, 0, 0, 0.06) !important;
  }
  .dark .shadow-soft {
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.35), 0 10px 30px rgba(0, 0, 0, 0.45) !important;
  }

  .neon-glow {
    background: radial-gradient(
        60% 140% at 10% -20%,
        rgba(var(--glow) / 0.35),
        transparent 60%
      ),
      radial-gradient(
        40% 100% at 90% -10%,
        rgba(var(--accent) / 0.25),
        transparent 60%
      );
  }

  .text-primary {
    color: var(--coral-500);
  }
  .text-primary-strong {
    color: var(--coral-600);
  }
  .text-muted {
    color: var(--fg-muted);
  }
  .text-strong {
    color: var(--fg-strong);
  }

  /* Soften CTA but keep glow */
  .btn-neon {
    @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 font-medium transition;
    color: var(--fg-strong);
    background: color-mix(in oklch, var(--coral-600) 15%, transparent);
    border: 2px solid var(--coral-600);
    box-shadow: 0 0 12px color-mix(in oklch, var(--coral-600) 25%, transparent);
  }
  .btn-neon:hover {
    box-shadow: 0 0 20px color-mix(in oklch, var(--coral-600) 40%, transparent);
    background: color-mix(in oklch, var(--coral-600) 22%, transparent);
  }

  .dark .btn-neon {
    color: white;
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.25),
      rgba(0, 0, 0, 0.35)
    );
    box-shadow: 0 0 18px var(--coral-800);
  }
  .dark .btn-neon:hover {
    box-shadow: 0 0 26px var(--coral-600);
  }

  /* Coral outline/tonal buttons */
  .btn-outline {
    @apply inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium transition;
    color: var(--fg-strong);
    border: 2px solid var(--coral-600);
    background: color-mix(in oklch, var(--coral-600) 8%, transparent);
  }
  .btn-outline:hover {
    box-shadow: 0 0 16px color-mix(in oklch, var(--coral-600) 35%, transparent);
    background: color-mix(in oklch, var(--coral-600) 15%, transparent);
  }

  .dark .btn-outline {
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.25),
      rgba(0, 0, 0, 0.35)
    );
  }
  .dark .btn-outline:hover {
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.2),
      rgba(0, 0, 0, 0.3)
    );
  }

  .btn-tonal {
    @apply inline-flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium transition;
    color: var(--fg-strong);
    background-color: color-mix(in oklch, var(--coral-50) 10%, transparent);
    border: 1.5px solid color-mix(in oklch, var(--coral-600) 35%, transparent);
  }
  .btn-tonal:hover {
    background-color: color-mix(in oklch, var(--coral-50) 16%, transparent);
  }

  /* Very light section grouping */
  .section-soft {
    @apply rounded-xl p-3 sm:p-4 border;
    background-color: color-mix(in oklch, var(--fg-strong) 6%, transparent);
    border-color: color-mix(in oklch, var(--fg-strong) 12%, transparent);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
      0 4px 6px -4px rgba(0, 0, 0, 0.3);
    transition: box-shadow 160ms ease;
  }

  /* Elevated inputs on RecipeBuilder page */
  .page-recipe .section-soft input,
  .page-recipe .section-soft select {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
      0 4px 6px -4px rgba(0, 0, 0, 0.3);
    transition: box-shadow 150ms ease, background-color 150ms ease;
  }
  .page-recipe .section-soft input:hover,
  .page-recipe .section-soft select:hover,
  .page-recipe .section-soft input:focus,
  .page-recipe .section-soft select:focus {
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, 0.15);
    outline: none;
  }

  /* Normalize inner vertical rhythm so top/bottom feel even */
  .page-recipe .section-soft > *:first-child {
    margin-top: 0 !important;
  }
  .page-recipe .section-soft > *:last-child {
    margin-bottom: 0 !important;
  }

  /* When a section has only a header row, reduce vertical padding */
  .page-recipe .section-soft.py-2 {
    padding-top: 1rem !important;
    padding-bottom: 0.5rem !important;
  }

  /* Theme-aware overrides for white utilities */
  .text-white\/90 {
    color: color-mix(in oklch, var(--fg-strong) 95%, black 5%) !important;
  }
  .text-white\/80 {
    color: color-mix(in oklch, var(--fg-strong) 90%, black 10%) !important;
  }
  .text-white\/70 {
    color: color-mix(in oklch, var(--fg-strong) 85%, black 15%) !important;
  }
  .text-white\/60 {
    color: var(--fg-muted) !important;
  }
  .text-white\/30 {
    color: color-mix(in oklch, var(--fg-muted) 60%, transparent) !important;
  }
  .hover\:text-white\/90:hover {
    color: color-mix(in oklch, var(--fg-strong) 95%, black 5%) !important;
  }

  .border-white\/10 {
    border-color: color-mix(
      in oklch,
      var(--fg-strong) 10%,
      transparent
    ) !important;
  }
  .border-white\/20 {
    border-color: color-mix(
      in oklch,
      var(--fg-strong) 20%,
      transparent
    ) !important;
  }

  .bg-white\/5 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 5%,
      transparent
    ) !important;
  }
  .bg-white\/10 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 10%,
      transparent
    ) !important;
  }
  .bg-white\/15 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 15%,
      transparent
    ) !important;
  }
  .bg-white\/25 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 25%,
      transparent
    ) !important;
  }
  .bg-white\/40 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 40%,
      transparent
    ) !important;
  }
  .bg-white\/50 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 50%,
      transparent
    ) !important;
  }
  .bg-white\/90 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 90%,
      transparent
    ) !important;
  }

  .hover\:bg-white\/10:hover {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 10%,
      transparent
    ) !important;
  }
  .hover\:bg-white\/15:hover {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 15%,
      transparent
    ) !important;
  }

  /* Theme-aware bg-black overrides (for dropdowns/overlays) */
  .bg-black\/50 {
    background-color: color-mix(
      in oklch,
      var(--fg-strong) 50%,
      transparent
    ) !important;
  }

  .ring-white\/50 {
    --tw-ring-color: color-mix(
      in oklch,
      var(--fg-strong) 50%,
      transparent
    ) !important;
  }
  .ring-white\/60 {
    --tw-ring-color: color-mix(
      in oklch,
      var(--fg-strong) 60%,
      transparent
    ) !important;
  }
}
